<div class='xml_fields'>

  <%# @todo improve on this implementation.
    As it stands, it's a hostage to namespaces,
    eg. dc:title
    if namespaces aren't in the xml, we would have to specify dc:title
    but if the namespaces ARE present, we remove them so we would need title
  %>
  <%= fi.input :record_element,
    hint: t('bulkrax.importer.xml.hints.record_element'),
    input_html: { value: importer.parser_fields['record_element'] }
    %>

  <%= fi.input :import_type,
		collection: [
      [t('bulkrax.importer.xml.import_type.single'), 'single'],
			[t('bulkrax.importer.xml.import_type.multiple'), 'multiple']
		],
    selected: importer.parser_fields['import_type'],
    input_html: { class: 'form-control' }
    %>

  <h4><%= t('bulkrax.importer.xml.labels.visibility') %></h4>

  <%= fi.input :visibility,
    collection: [
      [t('bulkrax.importer.xml.visibility.public'), 'open'],
      [t('bulkrax.importer.xml.visibility.private'), 'restricted'],
      [t('bulkrax.importer.xml.visibility.institution'), 'authenticated']
    ],
    selected: importer.parser_fields['visibility'] || 'open',
    input_html: { class: 'form-control' }
  %>

  <% if defined?(::Hyrax) %>
    <% rights_statements = Hyrax.config.rights_statement_service_class.new %>
    <%= fi.input :rights_statement,
          collection: rights_statements.select_active_options,
          selected: importer.parser_fields['rights_statement'],
          include_blank: true,
          item_helper: rights_statements.method(:include_current_value),
          input_html: { class: 'form-control' },
          required: false %>
    <%= fi.input :override_rights_statement, as: :boolean, hint: t('bulkrax.importer.xml.hints.override_rights_statement'), input_html: { checked: (importer.parser_fields['override_rights_statement'] == "1") } %>
  <% end %>
  <h4><%= t('bulkrax.importer.xml.labels.xml_and_files') %></h4>
  <p><%= t('bulkrax.importer.xml.hints.file_upload_hint') %></p>
  <p><%= t('bulkrax.importer.xml.hints.server_path_hint') %></p>

<%= fi.input :file_style,
  collection: [t('bulkrax.importer.xml.file_style.upload'), t('bulkrax.importer.xml.file_style.server_path')] +
              (defined?(::Hyrax) && Hyrax.config.browse_everything? ? [t('bulkrax.importer.xml.file_style.cloud')] : []),
  as: :radio_buttons, label: false %>
  <div id='file_upload'>
    <% if defined?(::Hyrax) %>
      <%= render 'bulkrax/importers/file_uploader', accepted_file_types: 'application/zip,application/xml' %>
    <% else %>
      <%= fi.input 'file', as: :file, input_html: {accept: ['application/zip', 'application/xml']} %><br />
    <% end%>
  </div>
  <div id='file_path'>
    <%= fi.input :import_file_path, as: :string, input_html: { value: importer.parser_fields['import_file_path'] } %>
  </div>
  <div id='cloud'>
    <% if defined?(::Hyrax) && Hyrax.config.browse_everything? %>
    <% end %>
  </div>
</div>